{{#if endpoint.body}}
export interface {{endpoint.interfaceName}}RequestBody {
  {{#each endpoint.body}}
  {{this.name}}: {{this.type}};
  {{/each}}
}
{{/if}}

export interface {{endpoint.interfaceName}}HandlerResponse {
  {{#each endpoint.response}}
  {{this.name}}: {{this.type}};
  {{/each}}
}

export async function fetch{{endpoint.interfaceName}}(
        {{#if endpoint.param}}{{endpoint.param}}: string, {{/if}}
        {{#if endpoint.body}}body: {{endpoint.interfaceName}}RequestBody,{{/if}}
        onSuccess: (response: {{endpoint.interfaceName}}HandlerResponse) => void,
        onFailed: () => void
    ): Promise<void> {
    const response = await fetch(`http://localhost:3001/api/{{routerName}}/{{endpoint.eName}}/{{#if endpoint.param}}${ {{endpoint.param}} }{{/if}}`, {
        method: '{{endpoint.method}}',
        headers: {
            "Content-Type": "application/json",
        },
        {{#if endpoint.body}}body: JSON.stringify(body){{/if}}
    });
    if (response.ok) {
        onSuccess(await response.json());
    } else {
        onFailed();
    }
}